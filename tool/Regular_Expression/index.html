<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>正则表达式 | awesome-notes</title>
    <meta name="generator" content="VuePress 1.8.0">
    <script src="https://cdn.jsdelivr.net/npm/react/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/zrender@4.3.0/dist/zrender.js"></script>
    <script src="https://d3js.org/d3.v5.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.116.1/build/three.js"></script>
    <link rel="icon" href="/logo.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="笔记">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.796597b9.css" as="style"><link rel="preload" href="/assets/js/app.6837fd68.js" as="script"><link rel="preload" href="/assets/js/2.ba37855e.js" as="script"><link rel="preload" href="/assets/js/46.1110c8f6.js" as="script"><link rel="preload" href="/assets/js/5.65b8a4d7.js" as="script"><link rel="prefetch" href="/assets/js/10.bf21da98.js"><link rel="prefetch" href="/assets/js/11.47c17e33.js"><link rel="prefetch" href="/assets/js/12.52366a61.js"><link rel="prefetch" href="/assets/js/13.f3d2ea36.js"><link rel="prefetch" href="/assets/js/14.26ad3fbd.js"><link rel="prefetch" href="/assets/js/15.330cca97.js"><link rel="prefetch" href="/assets/js/16.0db907f7.js"><link rel="prefetch" href="/assets/js/17.f4312399.js"><link rel="prefetch" href="/assets/js/18.0078fa2e.js"><link rel="prefetch" href="/assets/js/19.0567fee3.js"><link rel="prefetch" href="/assets/js/20.4fc2b2d0.js"><link rel="prefetch" href="/assets/js/21.5c974e0c.js"><link rel="prefetch" href="/assets/js/22.278aa096.js"><link rel="prefetch" href="/assets/js/23.4d43f959.js"><link rel="prefetch" href="/assets/js/24.011de924.js"><link rel="prefetch" href="/assets/js/25.11cd2df3.js"><link rel="prefetch" href="/assets/js/26.6a2760d5.js"><link rel="prefetch" href="/assets/js/27.04bd79eb.js"><link rel="prefetch" href="/assets/js/28.ad8162cf.js"><link rel="prefetch" href="/assets/js/29.3297f0a3.js"><link rel="prefetch" href="/assets/js/3.2c6cfde3.js"><link rel="prefetch" href="/assets/js/30.e0b71ea8.js"><link rel="prefetch" href="/assets/js/31.3f54ff18.js"><link rel="prefetch" href="/assets/js/32.952dcf3b.js"><link rel="prefetch" href="/assets/js/33.0bda2b2a.js"><link rel="prefetch" href="/assets/js/34.b243bae4.js"><link rel="prefetch" href="/assets/js/35.90ef5354.js"><link rel="prefetch" href="/assets/js/36.c4af5d28.js"><link rel="prefetch" href="/assets/js/37.16931636.js"><link rel="prefetch" href="/assets/js/38.02bc5086.js"><link rel="prefetch" href="/assets/js/39.720f73c8.js"><link rel="prefetch" href="/assets/js/4.869e2716.js"><link rel="prefetch" href="/assets/js/40.393a2a14.js"><link rel="prefetch" href="/assets/js/41.aec51b9a.js"><link rel="prefetch" href="/assets/js/42.5c15d0e0.js"><link rel="prefetch" href="/assets/js/43.835cc25d.js"><link rel="prefetch" href="/assets/js/44.e4b5e541.js"><link rel="prefetch" href="/assets/js/45.dba35b69.js"><link rel="prefetch" href="/assets/js/47.68311e50.js"><link rel="prefetch" href="/assets/js/6.b6b55724.js"><link rel="prefetch" href="/assets/js/7.ae224605.js"><link rel="prefetch" href="/assets/js/8.448f622f.js"><link rel="prefetch" href="/assets/js/9.3a3dcbf5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.796597b9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">awesome-notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fontend/basis/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-subitem"><a href="/fontend/basis/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-subitem"><a href="/fontend/basis/TypeScript/" class="nav-link">
  TypeScript
</a></li></ul></li><li class="dropdown-item"><h4>
          
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fontend/note/" class="nav-link">
  笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fontend/frame/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/fontend/frame/React/" class="nav-link">
  React
</a></li></ul></li><li class="dropdown-item"><h4>
          
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fontend/data-visualization/" class="nav-link">
  数据可视化
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/basis/Go/" class="nav-link">
  Go
</a></li><li class="dropdown-subitem"><a href="/backend/basis/PHP/" class="nav-link">
  PHP
</a></li><li class="dropdown-subitem"><a href="/backend/basis/Java/" class="nav-link">
  Java
</a></li><li class="dropdown-subitem"><a href="/backend/basis/Node/" class="nav-link">
  Node
</a></li><li class="dropdown-subitem"><a href="/backend/basis/Python/" class="nav-link">
  Python
</a></li></ul></li><li class="dropdown-item"><h4>
          数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/database/MySQL/" class="nav-link">
  MySQL
</a></li><li class="dropdown-subitem"><a href="/backend/database/Redis/" class="nav-link">
  Redis
</a></li><li class="dropdown-subitem"><a href="/backend/database/MongoDB/" class="nav-link">
  MongoDB
</a></li></ul></li><li class="dropdown-item"><h4>
          中间件
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/middleware/RabbitMQ/" class="nav-link">
  RabbitMQ
</a></li><li class="dropdown-subitem"><a href="/backend/middleware/HAProxy/" class="nav-link">
  HAProxy 
</a></li><li class="dropdown-subitem"><a href="/backend/middleware/Nginx/" class="nav-link">
  Nginx
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title">工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具" class="mobile-dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool/Git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/tool/Docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/tool/Jenkins/" class="nav-link">
  Jenkins
</a></li><li class="dropdown-item"><!----> <a href="/tool/Regular_Expression/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  正则表达式
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="系统" class="dropdown-title"><span class="title">系统</span> <span class="arrow down"></span></button> <button type="button" aria-label="系统" class="mobile-dropdown-title"><span class="title">系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/system/CentOS/" class="nav-link">
  CentOS
</a></li><li class="dropdown-item"><!----> <a href="/system/Ubuntu/" class="nav-link">
  Ubuntu
</a></li></ul></div></div><div class="nav-item"><a href="/repository/" class="nav-link">
  库
</a></div><div class="nav-item"><a href="/note/" class="nav-link">
  零星笔记
</a></div> <a href="https://github.com/lalifeier/awesome-notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fontend/basis/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-subitem"><a href="/fontend/basis/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-subitem"><a href="/fontend/basis/TypeScript/" class="nav-link">
  TypeScript
</a></li></ul></li><li class="dropdown-item"><h4>
          
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fontend/note/" class="nav-link">
  笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fontend/frame/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/fontend/frame/React/" class="nav-link">
  React
</a></li></ul></li><li class="dropdown-item"><h4>
          
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fontend/data-visualization/" class="nav-link">
  数据可视化
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/basis/Go/" class="nav-link">
  Go
</a></li><li class="dropdown-subitem"><a href="/backend/basis/PHP/" class="nav-link">
  PHP
</a></li><li class="dropdown-subitem"><a href="/backend/basis/Java/" class="nav-link">
  Java
</a></li><li class="dropdown-subitem"><a href="/backend/basis/Node/" class="nav-link">
  Node
</a></li><li class="dropdown-subitem"><a href="/backend/basis/Python/" class="nav-link">
  Python
</a></li></ul></li><li class="dropdown-item"><h4>
          数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/database/MySQL/" class="nav-link">
  MySQL
</a></li><li class="dropdown-subitem"><a href="/backend/database/Redis/" class="nav-link">
  Redis
</a></li><li class="dropdown-subitem"><a href="/backend/database/MongoDB/" class="nav-link">
  MongoDB
</a></li></ul></li><li class="dropdown-item"><h4>
          中间件
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/backend/middleware/RabbitMQ/" class="nav-link">
  RabbitMQ
</a></li><li class="dropdown-subitem"><a href="/backend/middleware/HAProxy/" class="nav-link">
  HAProxy 
</a></li><li class="dropdown-subitem"><a href="/backend/middleware/Nginx/" class="nav-link">
  Nginx
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title">工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具" class="mobile-dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool/Git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/tool/Docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/tool/Jenkins/" class="nav-link">
  Jenkins
</a></li><li class="dropdown-item"><!----> <a href="/tool/Regular_Expression/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  正则表达式
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="系统" class="dropdown-title"><span class="title">系统</span> <span class="arrow down"></span></button> <button type="button" aria-label="系统" class="mobile-dropdown-title"><span class="title">系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/system/CentOS/" class="nav-link">
  CentOS
</a></li><li class="dropdown-item"><!----> <a href="/system/Ubuntu/" class="nav-link">
  Ubuntu
</a></li></ul></div></div><div class="nav-item"><a href="/repository/" class="nav-link">
  库
</a></div><div class="nav-item"><a href="/note/" class="nav-link">
  零星笔记
</a></div> <a href="https://github.com/lalifeier/awesome-notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>正则表达式</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tool/Regular_Expression/#元字符" class="sidebar-link">元字符</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#特殊单字符" class="sidebar-link">特殊单字符</a></li><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#空白符" class="sidebar-link">空白符</a></li><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#量词" class="sidebar-link">量词</a></li><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#范围" class="sidebar-link">范围</a></li></ul></li><li><a href="/tool/Regular_Expression/#贪婪、非贪婪与独占模式" class="sidebar-link">贪婪、非贪婪与独占模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#贪婪匹配" class="sidebar-link">贪婪匹配</a></li><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#非贪婪匹配" class="sidebar-link">非贪婪匹配</a></li><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#独占模式" class="sidebar-link">独占模式</a></li></ul></li><li><a href="/tool/Regular_Expression/#分组" class="sidebar-link">分组</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#分组编号" class="sidebar-link">分组编号</a></li><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#分组引用" class="sidebar-link">分组引用</a></li></ul></li><li><a href="/tool/Regular_Expression/#匹配模式" class="sidebar-link">匹配模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#不区分大小写模式" class="sidebar-link">不区分大小写模式</a></li><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#点号通配模式" class="sidebar-link">点号通配模式</a></li><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#多行匹配模式" class="sidebar-link">多行匹配模式</a></li><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#注释模式" class="sidebar-link">注释模式</a></li></ul></li><li><a href="/tool/Regular_Expression/#断言" class="sidebar-link">断言</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#单词的边界" class="sidebar-link">单词的边界</a></li><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#行的开始或结束" class="sidebar-link">行的开始或结束</a></li><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#环视" class="sidebar-link">环视</a></li></ul></li><li><a href="/tool/Regular_Expression/#转义" class="sidebar-link">转义</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#转义字符" class="sidebar-link">转义字符</a></li><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#字符串转义和正则转义" class="sidebar-link">字符串转义和正则转义</a></li><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#元字符的转义" class="sidebar-link">元字符的转义</a></li><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#字符组的转义" class="sidebar-link">字符组的转义</a></li></ul></li><li><a href="/tool/Regular_Expression/#正则流派" class="sidebar-link">正则流派</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#posix-流派" class="sidebar-link">POSIX 流派</a></li><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#pcre-流派" class="sidebar-link">PCRE 流派</a></li></ul></li><li><a href="/tool/Regular_Expression/#编程语言使用正则" class="sidebar-link">编程语言使用正则</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#校验文本内容" class="sidebar-link">校验文本内容</a></li><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#提取文本内容" class="sidebar-link">提取文本内容</a></li><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#替换文本内容" class="sidebar-link">替换文本内容</a></li><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#切割文本内容" class="sidebar-link">切割文本内容</a></li></ul></li><li><a href="/tool/Regular_Expression/#正则匹配原理" class="sidebar-link">正则匹配原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#有穷自动机" class="sidebar-link">有穷自动机</a></li><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#dfa" class="sidebar-link">DFA</a></li><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#nfa" class="sidebar-link">NFA</a></li><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#优化" class="sidebar-link">优化</a></li></ul></li><li><a href="/tool/Regular_Expression/#正则问题" class="sidebar-link">正则问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#处理思路" class="sidebar-link">处理思路</a></li><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#常见问题" class="sidebar-link">常见问题</a></li><li class="sidebar-sub-header"><a href="/tool/Regular_Expression/#其他说明" class="sidebar-link">其他说明</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="正则表达式"><a href="#正则表达式" class="header-anchor">#</a> 正则表达式</h1> <p>正则，就是正则表达式，英文是 Regular Expression，简称 RE。顾名思义，正则其实就是一种描述文本内容组成规律的表示方式。</p> <h2 id="元字符"><a href="#元字符" class="header-anchor">#</a> 元字符</h2> <p>所谓元字符就是指那些在正则表达式中具有特殊意义的专用字符，元字符是构成正则表达式的基本元件。</p> <h3 id="特殊单字符"><a href="#特殊单字符" class="header-anchor">#</a> 特殊单字符</h3> <p>表示特殊单个字符的元字符</p> <table><thead><tr><th style="text-align:center;">元字符</th> <th style="text-align:center;">含义</th></tr></thead> <tbody><tr><td style="text-align:center;">.</td> <td style="text-align:center;">任意字符(换行除外)</td></tr> <tr><td style="text-align:center;">\d</td> <td style="text-align:center;">任意数字</td></tr> <tr><td style="text-align:center;">\D</td> <td style="text-align:center;">任意非数字</td></tr> <tr><td style="text-align:center;">\w</td> <td style="text-align:center;">任意字母数字下划线</td></tr> <tr><td style="text-align:center;">\W</td> <td style="text-align:center;">任意非字母数字下划线</td></tr> <tr><td style="text-align:center;">\s</td> <td style="text-align:center;">任意空白符</td></tr> <tr><td style="text-align:center;">\S</td> <td style="text-align:center;">任意非空白符</td></tr></tbody></table> <h3 id="空白符"><a href="#空白符" class="header-anchor">#</a> 空白符</h3> <p>空格、换行等空白符</p> <table><thead><tr><th style="text-align:center;">元字符</th> <th style="text-align:center;">含义</th></tr></thead> <tbody><tr><td style="text-align:center;">\r</td> <td style="text-align:center;">回车符</td></tr> <tr><td style="text-align:center;">\n</td> <td style="text-align:center;">换行符</td></tr> <tr><td style="text-align:center;">\f</td> <td style="text-align:center;">换页符</td></tr> <tr><td style="text-align:center;">\t</td> <td style="text-align:center;">制表符</td></tr> <tr><td style="text-align:center;">\v</td> <td style="text-align:center;">垂直制表符</td></tr> <tr><td style="text-align:center;">\s</td> <td style="text-align:center;">任意空白符</td></tr></tbody></table> <p>换行有专门的表示方式，在正则中，空格就是用普通的字符英文的空格来表示。</p> <h3 id="量词"><a href="#量词" class="header-anchor">#</a> 量词</h3> <p>表示量词的元字符</p> <table><thead><tr><th style="text-align:center;">元字符</th> <th style="text-align:center;">含义</th></tr></thead> <tbody><tr><td style="text-align:center;">*</td> <td style="text-align:center;">0 到多次</td></tr> <tr><td style="text-align:center;">+</td> <td style="text-align:center;">1 到多次</td></tr> <tr><td style="text-align:center;">?</td> <td style="text-align:center;">0 到 1 次</td></tr> <tr><td style="text-align:center;">{m}</td> <td style="text-align:center;">出现 m 次</td></tr> <tr><td style="text-align:center;">{m,}</td> <td style="text-align:center;">出现至少 m 次</td></tr> <tr><td style="text-align:center;">{m,n}</td> <td style="text-align:center;">m 到 n 次</td></tr></tbody></table> <h3 id="范围"><a href="#范围" class="header-anchor">#</a> 范围</h3> <p>在一个特殊的范围里找符合要求的内容</p> <table><thead><tr><th style="text-align:center;">元字符</th> <th style="text-align:center;">含义</th></tr></thead> <tbody><tr><td style="text-align:center;">|</td> <td style="text-align:center;">或</td></tr> <tr><td style="text-align:center;">[...]</td> <td style="text-align:center;">多选一，括号中任意单个元素</td></tr> <tr><td style="text-align:center;">[a-z]</td> <td style="text-align:center;">匹配 a 到 z 之间任意单个元素(按 ASCII 表，包含 a,z)</td></tr> <tr><td style="text-align:center;">[^...]</td> <td style="text-align:center;">取反，不能是括号中的任意单个元素</td></tr></tbody></table> <h2 id="贪婪、非贪婪与独占模式"><a href="#贪婪、非贪婪与独占模式" class="header-anchor">#</a> 贪婪、非贪婪与独占模式</h2> <h3 id="贪婪匹配"><a href="#贪婪匹配" class="header-anchor">#</a> 贪婪匹配</h3> <p>表示次数的量词，默认是贪婪的，满足要求的情况下，尽可能按最长去匹配</p> <p>回溯：后面匹配不上，会吐出已匹配的再尝试</p> <h3 id="非贪婪匹配"><a href="#非贪婪匹配" class="header-anchor">#</a> 非贪婪匹配</h3> <p>&quot;数量&quot;元字符后加?(英文问号)，满足要求的情况下，尽可能按最短去匹配</p> <p>回溯：后面匹配不上，会按照更长再接着尝试</p> <h3 id="独占模式"><a href="#独占模式" class="header-anchor">#</a> 独占模式</h3> <p>&quot;量词&quot;元字符后加+(英文问号)，满足要求的情况下，尽可能按最长去匹配</p> <p>不会发生回溯，匹配不上即失败</p> <h2 id="分组"><a href="#分组" class="header-anchor">#</a> 分组</h2> <p>将某部分(子表达式)看成一个整体，在后续查找或替换中引用分组</p> <h3 id="分组编号"><a href="#分组编号" class="header-anchor">#</a> 分组编号</h3> <p>第几个括号就是第几个分组</p> <p>不保存分组(?:正则)</p> <p>括号嵌套只需要看左括号的序号</p> <p>命名分组(?P&lt;名称&gt;正则)</p> <h3 id="分组引用"><a href="#分组引用" class="header-anchor">#</a> 分组引用</h3> <p>查找：查找重复出现的部分</p> <p>替换：对原有内容格式进行改写</p> <table><thead><tr><th style="text-align:center;">编程语言</th> <th style="text-align:center;">查找时引用方式</th> <th>替换时引用方式</th></tr></thead> <tbody><tr><td style="text-align:center;">Python</td> <td style="text-align:center;">\number 如\1</td> <td>\number 如\1</td></tr> <tr><td style="text-align:center;">Go</td> <td style="text-align:center;">官方包不支持</td> <td>官方包不支持</td></tr> <tr><td style="text-align:center;">Java</td> <td style="text-align:center;">\number 如\1</td> <td>$number 如$1</td></tr> <tr><td style="text-align:center;">JavaScript</td> <td style="text-align:center;">$number 如$1</td> <td>$number 如$1</td></tr> <tr><td style="text-align:center;">PHP</td> <td style="text-align:center;">\number 如\1</td> <td>\number 如\1</td></tr> <tr><td style="text-align:center;">Ruby</td> <td style="text-align:center;">\number 如\1</td> <td>\number 如\1</td></tr></tbody></table> <h2 id="匹配模式"><a href="#匹配模式" class="header-anchor">#</a> 匹配模式</h2> <p>匹配模式，指的是正则中一些改变元字符匹配行为的方式，比如匹配时不区分英文字母大小写。</p> <h3 id="不区分大小写模式"><a href="#不区分大小写模式" class="header-anchor">#</a> 不区分大小写模式</h3> <p>作用：正则不区分英文字母的大小写</p> <p>修饰符：(?i)</p> <h3 id="点号通配模式"><a href="#点号通配模式" class="header-anchor">#</a> 点号通配模式</h3> <p>作用：英文的点号可以匹配任何字符，包括换行</p> <p>修饰符：(?s)</p> <p>很多地方称为&quot;单行匹配模式&quot;，其实和多行匹配没有联系</p> <p>Ruby 中 Multiline 其实就是单行匹配模式</p> <p>等价于[\s\S]或[\d\D]或[\w\W]，但更简洁</p> <h3 id="多行匹配模式"><a href="#多行匹配模式" class="header-anchor">#</a> 多行匹配模式</h3> <p>作用：^或$默认是整个字符串的开头或结尾，多行模式使他们能匹配每行的开头和结尾</p> <p>修饰符：(?m)</p> <p>^匹配行的开始，多行模式时，可以匹配任意行开头</p> <p>$匹配行的结束，多行模式时，可以匹配任意行结尾</p> <h3 id="注释模式"><a href="#注释模式" class="header-anchor">#</a> 注释模式</h3> <p>作用：正则可能很复杂，编写和阅读维护困难，添加注释方便理解</p> <p>修饰符：(?#comment)</p> <h2 id="断言"><a href="#断言" class="header-anchor">#</a> 断言</h2> <h3 id="单词的边界"><a href="#单词的边界" class="header-anchor">#</a> 单词的边界</h3> <p>\b 匹配单词边界</p> <h3 id="行的开始或结束"><a href="#行的开始或结束" class="header-anchor">#</a> 行的开始或结束</h3> <p>^匹配行的开始 多行匹配时，可以匹配任意行开头</p> <p>^匹配行的结束 多行匹配时，可以匹配任意行结束</p> <p>\A 仅匹配整个字符串的开始，不支持多行匹配</p> <p>\Z 仅匹配整个字符串的结束，不支持多行匹配</p> <h3 id="环视"><a href="#环视" class="header-anchor">#</a> 环视</h3> <p>(?&lt;=Y)X 匹配前面是 Y 的 X</p> <p>(?&lt;!Y)X 匹配前面不是 Y 的 X</p> <p>X(?=Y) 匹配后面是 Y 的 X</p> <p>X(?!Y) 匹配后面是 Y 的 X</p> <h2 id="转义"><a href="#转义" class="header-anchor">#</a> 转义</h2> <h3 id="转义字符"><a href="#转义字符" class="header-anchor">#</a> 转义字符</h3> <p>含义：对它后续的几个字符进行替代并解释</p> <p>功能：编码无法用字母表直接表示的特殊数据，表示无法直接键盘录入的字符(如回车符)</p> <h3 id="字符串转义和正则转义"><a href="#字符串转义和正则转义" class="header-anchor">#</a> 字符串转义和正则转义</h3> <p>字符串转义：输入字符串到字符串文本的过程</p> <p>正则转义：正则文字到正则表达式的过程</p> <p>匹配反斜杠需要用四个\</p> <p>简化方式：使用原生字符串</p> <h3 id="元字符的转义"><a href="#元字符的转义" class="header-anchor">#</a> 元字符的转义</h3> <p>量词*或+或?或-或^或$或|等，直接在前面加反斜杠</p> <p>括号[]{}只需要转义开括号，但()两个都要转义，即\(\)</p> <p>使用编程语言中的函数消除元字符特殊含义</p> <table><thead><tr><th style="text-align:center;">编程语言</th> <th style="text-align:center;">函数</th></tr></thead> <tbody><tr><td style="text-align:center;">Python</td> <td style="text-align:center;">re.escape(text)</td></tr> <tr><td style="text-align:center;">Go</td> <td style="text-align:center;">regexp.QuoteMeta(text)</td></tr> <tr><td style="text-align:center;">Java</td> <td style="text-align:center;">Pattern_quote(text)</td></tr> <tr><td style="text-align:center;">PHP</td> <td style="text-align:center;">preg_quote(text)</td></tr></tbody></table> <h3 id="字符组的转义"><a href="#字符组的转义" class="header-anchor">#</a> 字符组的转义</h3> <p>^在中括号中，且在第一个位置</p> <p>-在中括号中，且不在首尾位置</p> <p>)在中括号中，且不在首位</p> <p>其他单个长度的元字符一般不需要转义</p> <h2 id="正则流派"><a href="#正则流派" class="header-anchor">#</a> 正则流派</h2> <h3 id="posix-流派"><a href="#posix-流派" class="header-anchor">#</a> POSIX 流派</h3> <ol><li><p>POSIX 字符组</p></li> <li><p>BRE</p></li></ol> <p>工具：grep 、vi/vim 、 sed 等</p> <p>特点：花括号，圆括号要转义，不支持问号，管道符和加号</p> <p>字符组：不能使用\d 等字符组，需要使用 PXSIX 字符组</p> <p>GNU BRE :</p> <p>工具：GNU grep 、GNU sed 等</p> <p>特点：在 BRE 基础上，支持问号 、加号和管道符</p> <ol start="3"><li>ERE</li></ol> <p>工具：egrep awk 等</p> <p>特点：花括号，圆括号不用转义，支持问号，管道符和加号</p> <p>字符组：不能使用\d 等字符组，需要使用 PXSIX 字符组</p> <p>GNU ERE :</p> <p>工具：GNU grep -E 、GNU sed -E 等</p> <p>特点：在 ERE 基础上，支持反向引用\1\2 等</p> <ol start="4"><li>man 命令</li></ol> <p>查看使用说明</p> <p>查看工具使用的正则流派</p> <h3 id="pcre-流派"><a href="#pcre-流派" class="header-anchor">#</a> PCRE 流派</h3> <p>工具：grep -P 、 sed -P 目前主流的编程语言</p> <p>特点：\d \w \s 是它的显著标识</p> <p>常见编程语言都是基于 PCRE 流派的</p> <h2 id="编程语言使用正则"><a href="#编程语言使用正则" class="header-anchor">#</a> 编程语言使用正则</h2> <h3 id="校验文本内容"><a href="#校验文本内容" class="header-anchor">#</a> 校验文本内容</h3> <p>数据验证：通过在网页上输入手机号，邮箱，日期等，都需要校验</p> <p>校验特点：整个文本的内容都要符合正则</p> <h4 id="python"><a href="#python" class="header-anchor">#</a> Python</h4> <p>Python 文本校验，在正则中加上\A 和\Z</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code>reg <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span>r`<span class="token operator">/</span>\A\d<span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token operator">-</span>\d<span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token operator">-</span>\d<span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span>\Z`<span class="token punctuation">)</span>
matched <span class="token operator">=</span> reg<span class="token punctuation">.</span>search<span class="token punctuation">(</span><span class="token string">'2020-06-01'</span><span class="token punctuation">)</span> <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="go"><a href="#go" class="header-anchor">#</a> Go</h4> <p>Go 文本校验，在正则中加上\A 和\z</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code>re <span class="token operator">:=</span> regexp<span class="token punctuation">.</span><span class="token function">MustCompile</span><span class="token punctuation">(</span><span class="token string">`\A\d{4}-\d{2}-\d{2}\z`</span><span class="token punctuation">)</span>
matched <span class="token operator">:=</span> re<span class="token punctuation">.</span><span class="token function">MatchString</span><span class="token punctuation">(</span><span class="token string">&quot;2020-06-01&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="javascript"><a href="#javascript" class="header-anchor">#</a> Javascript</h4> <p>Javascript 文本校验，在正则中加上^ 和$
不能是多行模式，不能使用 g 模式</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">;</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\d{4}-\d{2}-\d$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'2020-06-01'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="java"><a href="#java" class="header-anchor">#</a> Java</h4> <p>Java 中没有原生字符串，转义稍微麻烦些</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Pattern</span> pattern <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">&quot;\\A\\d{4}-\\d{2}-\\d{2}\\z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
pattern<span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span><span class="token string">&quot;2020-06-01&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="ruby"><a href="#ruby" class="header-anchor">#</a> Ruby</h4> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>puts <span class="token punctuation">(</span><span class="token string">&quot;2020-06-01&quot;</span><span class="token operator">=</span><span class="token operator">~</span><span class="token regex">/\A\d{4}-\d{2}-\d{2}\z/</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">nil</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="php"><a href="#php" class="header-anchor">#</a> PHP</h4> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$regex</span> <span class="token operator">=</span> <span class="token double-quoted-string string">&quot;/\A\d{4}-\d{2}-\d{2}\z/&quot;</span><span class="token punctuation">;</span>
<span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token variable">$regex</span><span class="token punctuation">,</span> <span class="token double-quoted-string string">&quot;2020-06-01&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="提取文本内容"><a href="#提取文本内容" class="header-anchor">#</a> 提取文本内容</h3> <p>从文本中抽取内容，常见比如网络爬虫</p> <p>特点：文本中部分内容符合正则，从里面查找</p> <h4 id="python-2"><a href="#python-2" class="header-anchor">#</a> Python</h4> <p>Python 抽取文本内容，使用 re.findall 或 re.finditer</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code>reg <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span>r`<span class="token operator">/</span>\d<span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token operator">-</span>\d<span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span>`<span class="token punctuation">)</span>
reg<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'2020-05 2020-06'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="go-2"><a href="#go-2" class="header-anchor">#</a> Go</h4> <p>Go 提取文本，使用 FindAllString，捕获子组用 FindAllStringSubmatch</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code>re <span class="token operator">:=</span> regexp<span class="token punctuation">.</span><span class="token function">MustCompile</span><span class="token punctuation">(</span><span class="token string">`\d{4}-\d{2}`</span><span class="token punctuation">)</span>
re<span class="token punctuation">.</span><span class="token function">FindAllString</span><span class="token punctuation">(</span><span class="token string">&quot;2020-05 2020-06&quot;</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="javascript-2"><a href="#javascript-2" class="header-anchor">#</a> Javascript</h4> <p>Javascript 提取文本要使用 g 模式</p> <p>如果要查找中文等 Unicode 字符，可以使用 u 匹配模式</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string">'2020-05 2020-06'</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d{4}-\d{2}</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="java-2"><a href="#java-2" class="header-anchor">#</a> java</h4> <p>Java 查找文本，使用 match 的 find 方法</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Pattern</span> pattern <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">&quot;\\d{4}-\\d{2}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Matcher</span> match <span class="token operator">=</span> pattern<span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span><span class="token string">&quot;2020-05 2020-06&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>match<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>match<span class="token punctuation">.</span>group<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="ruby-2"><a href="#ruby-2" class="header-anchor">#</a> Ruby</h4> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>regex <span class="token operator">=</span> <span class="token regex">/\d{4}-\d{2}/</span>
puts <span class="token string">&quot;2020-05 2020-06&quot;</span><span class="token punctuation">.</span>scan<span class="token punctuation">(</span>regex<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="php-2"><a href="#php-2" class="header-anchor">#</a> PHP</h4> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$regex</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'/\d{4}-\d{2}/'</span><span class="token punctuation">;</span>
<span class="token variable">$string</span> <span class="token operator">=</span> <span class="token double-quoted-string string">&quot;2020-05 2020-06&quot;</span><span class="token punctuation">;</span>
<span class="token variable">$matches</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">preg_match_all</span><span class="token punctuation">(</span><span class="token variable">$regex</span><span class="token punctuation">,</span> <span class="token variable">$string</span><span class="token punctuation">,</span> <span class="token variable">$matches</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="替换文本内容"><a href="#替换文本内容" class="header-anchor">#</a> 替换文本内容</h3> <p>替换通常用于对原来的文本内容进行一些调整</p> <h4 id="python-3"><a href="#python-3" class="header-anchor">#</a> Python</h4> <p>Python 替换可以使用 re.sub 和 subn，后者会返回替换个数</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code>reg <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span>r`<span class="token punctuation">(</span>\d<span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">(</span>\d<span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">(</span>\d<span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">)</span>`<span class="token punctuation">)</span>
reg<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">r'\3年\1月\2日'</span><span class="token punctuation">,</span> <span class="token string">'02-20-2020 05-21-2020'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="go-3"><a href="#go-3" class="header-anchor">#</a> Go</h4> <p>Go 替换，子组是使用${num}表示，尽量不要用$num</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code>re <span class="token operator">:=</span> regexp<span class="token punctuation">.</span><span class="token function">MustCompile</span><span class="token punctuation">(</span><span class="token string">`(\d{2})-(\d{2})-(\d{4})`</span><span class="token punctuation">)</span>
re<span class="token punctuation">.</span><span class="token function">ReplaceAllString</span><span class="token punctuation">(</span><span class="token string">&quot;02-20-2020 05-21-2020&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;${3}年${1}月${2}日&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="javascript-3"><a href="#javascript-3" class="header-anchor">#</a> Javascript</h4> <p>Javascript 替换，需要指定 g 模式，否则只会替换第一个</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string">'02-20-2020 05-21-2020'</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(\d{2})-(\d{2})-(\d{4})</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'$3年$1月$2日'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="java-3"><a href="#java-3" class="header-anchor">#</a> Java</h4> <p>Java 替换，使用 replaceAll 替换所有</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Pattern</span> pattern <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">&quot;(\\d{2})-(\\d{2})-(\\d{4})&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Matcher</span> match <span class="token operator">=</span> pattern<span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span><span class="token string">&quot;02-20-2020 05-21-2020&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
match<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">&quot;$3年$1月$2日&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="ruby-3"><a href="#ruby-3" class="header-anchor">#</a> Ruby</h4> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code>puts <span class="token string">&quot;02-20-2020 05-21-2020&quot;</span><span class="token punctuation">.</span>gsub<span class="token punctuation">(</span><span class="token regex">/(\d{2})-(\d{2})-(\d{4})/</span><span class="token punctuation">,</span> <span class="token string">'\3年\1月\2日'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="php-3"><a href="#php-3" class="header-anchor">#</a> PHP</h4> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token function">preg_replace</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/(\d{2})-(\d{2})-(\d{4})/'</span><span class="token punctuation">,</span> <span class="token double-quoted-string string">&quot;\3年\1月\2日&quot;</span><span class="token punctuation">,</span> <span class="token double-quoted-string string">&quot;02-20-2020 05-21-2020&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="切割文本内容"><a href="#切割文本内容" class="header-anchor">#</a> 切割文本内容</h3> <p>切割可以用于处理某类分割符，比如连续变长的空白符号，标点等</p> <h4 id="python-4"><a href="#python-4" class="header-anchor">#</a> Python</h4> <p>Python 切割，使用 re.split 方法，第二个参数是切几刀，和 Java 和 Go 有区别</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code>reg <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span>r`\W<span class="token operator">+</span>`<span class="token punctuation">)</span>
reg<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'apple, pear! orange; tea'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="go-4"><a href="#go-4" class="header-anchor">#</a> Go</h4> <p>Go 切割，不限制次数时，传入-1，第二个参数代表切割成几部分，不是切几刀</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code>re <span class="token operator">:=</span> regexp<span class="token punctuation">.</span><span class="token function">MustCompile</span><span class="token punctuation">(</span><span class="token string">`\W+`</span><span class="token punctuation">)</span>
words <span class="token operator">:=</span> re<span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span><span class="token string">&quot;apple, pear! orange; tea&quot;</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="javascript-4"><a href="#javascript-4" class="header-anchor">#</a> Javascript</h4> <p>Javascript 切割，第二个参数是获取切割后数组的前面几个</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string">'apple, pear! orange; tea'</span><span class="token punctuation">.</span><span class="token function">spilt</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\W+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="java-4"><a href="#java-4" class="header-anchor">#</a> Java</h4> <p>Java 切割和 Go 很相似，正则需要转义</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token string">&quot;apple, pear! orange; tea&quot;</span><span class="token punctuation">.</span><span class="token function">spilt</span><span class="token punctuation">(</span><span class="token string">&quot;/\\W+&quot;</span><span class="token operator">/</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="ruby-4"><a href="#ruby-4" class="header-anchor">#</a> Ruby</h4> <div class="language-ruby line-numbers-mode"><pre class="language-ruby"><code><span class="token string">&quot;apple, pear! orange; tea&quot;</span><span class="token punctuation">.</span>spilt<span class="token punctuation">(</span><span class="token regex">/\W+/</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="php-4"><a href="#php-4" class="header-anchor">#</a> PHP</h4> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token function">preg_split</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/\W+/'</span><span class="token punctuation">,</span> <span class="token double-quoted-string string">&quot;apple, pear! orange; tea&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="正则匹配原理"><a href="#正则匹配原理" class="header-anchor">#</a> 正则匹配原理</h2> <h3 id="有穷自动机"><a href="#有穷自动机" class="header-anchor">#</a> 有穷自动机</h3> <p>正则引擎的具体实现：有穷状态自动机</p> <p>有穷：一个系统具有有穷个状态，不同的状态代表不同的意义</p> <p>自动机：指系统可以根据相应的条件在不同的状态下进行转移</p> <p>分类：</p> <p>DFA：确定性有穷自动机</p> <p>NFA：非确定性有穷自动机</p> <h3 id="dfa"><a href="#dfa" class="header-anchor">#</a> DFA</h3> <p>先看文本，再看正则，以文本为主导</p> <p>整个匹配过程字符串只看一遍，不回溯，相同字符不会测试两次</p> <p>没有反向引用功能，也不支持捕获子组</p> <p>代表有 MySQL Golang 等</p> <h3 id="nfa"><a href="#nfa" class="header-anchor">#</a> NFA</h3> <p>先看正则，再看文本，以正则为主导</p> <p>会发现回溯，字符串中同一部分可能会对比很多次</p> <p>支持子组和反向引用</p> <p>代表有 Java Python Ruby Perl 等</p> <p>POSIX NFA 尝试所有可能的匹配，返回最长最左的匹配</p> <h3 id="优化"><a href="#优化" class="header-anchor">#</a> 优化</h3> <p>测试正则性能，使用 ipython 或 regex101 等</p> <p>提前编译好正则</p> <p>尽量准确表示匹配范围</p> <p>提取出公共部分</p> <p>出现可能性大的放左边</p> <p>警惕嵌套子组重复</p> <p>避免不同分支重复匹配</p> <h2 id="正则问题"><a href="#正则问题" class="header-anchor">#</a> 正则问题</h2> <h3 id="处理思路"><a href="#处理思路" class="header-anchor">#</a> 处理思路</h3> <p>复杂问题拆解，变成多个小问题</p> <p>字符组：某个位置上可能是多个单字符就用</p> <p>多选结构：某个位置上可能是多个字符串</p> <p>量词：某部分出现次数不确定</p> <p>断言：对出现的位置有要求</p> <p>多选结构中，长度不确定，短的放后面</p> <h3 id="常见问题"><a href="#常见问题" class="header-anchor">#</a> 常见问题</h3> <ol><li>数字</li></ol> <p>数字在正则中可以使用 <code>\d</code> 或 <code>[0-9]</code> 来表示</p> <p>如果是连续的多个数字，可以使用 <code>\d+</code> 或 <code>[0-9]+</code></p> <p>如果 n 位数据，可以使用 <code>\d{n}</code>。如果是至少 n 位数据，可以使用 <code>\d{n,}</code></p> <p>如果是 m-n 位数字，可以使用 <code>\d{m,n}</code></p> <ol start="2"><li>正数，负数和小数</li></ol> <p>如果希望正则能匹配到比如 3，3.14，-3.3，+2.7 等数字，需要注意的是，开头的正负符号可能有，也可能没有，所以可以使用 [-+]? 来表示，小数点和后面的内容也不一定会有，所以可以使用 (?:.\d+)? 来表示，因此匹配正数、负数和小数的正则可以写成 [-+]?\d+(?:.\d+)?。</p> <p>非负整数，包含 0 和 正整数，可以表示成<code>[1-9]\d\*|0</code></p> <p>非正整数，包含 0 和 负整数，可以表示成<code>-[1-9]\d\*|0</code></p> <ol start="3"><li>浮点数</li></ol> <p>负数浮点数表示：<code>-\d+(?:\.\d+)?</code></p> <p>正数浮点数表示：<code>\+?(?:\d+(?:\.\d+)?|\.\d+)</code></p> <ol start="4"><li>十六进制数</li></ol> <p>十六进制的数字除了有 0-9 之外，还会有 a-f（或 A-F） 代表 10 到 15 这 6 个数字，所以正则可以写成 <code>[0-9A-Fa-f]+</code></p> <ol start="5"><li>手机号码</li></ol> <p>我们可以简单地使用字符组和多选分支，来准确地匹配手机号段。如果只限制前 2 位，可以表示成 <code>1[3-9]\d{9}</code>，如果想再精确些，限制到前三位，比如使用 <code>1(?:3\d|4[5-9]|5[0-35-9]|6[2567]|7[0-8]|8\d|9[1389])\d{8}</code>来表示。如果想精确到 4 位，甚至 5 位，可以根据公开的号段信息自己来写一下，但要注意的是，越是精确，只要有新的号段，你就得改这个正则，维护起来会比较麻烦。另外，在实际运用的时候，你可能还要考虑一下有一些号码了 +86 或 0086 之类的前缀的情况。</p> <ol start="6"><li>身份证号码</li></ol> <p>我国的身份证号码是分两代的，第一代是 15 位，第二代是 18 位。如果是 18 位，最后一位可以是 X（或 x），两代开头都不能是 0，根据规则，你应该能很容易写出相应的正则，第一代可以用 <code>[1-9]\d{14}</code> 来表示，第二代比第一代多 3 位数据，可以使用量词 0 到 1 次，即写成<code>[1-9]\d{14}(\d\d[0-9Xx])?</code>。</p> <ol start="7"><li>邮政编码</li></ol> <p>邮编一般为 6 位数字，首位不是 0，比较简单，可以写成 <code>[1-9]\d{5}</code>，之前我们也提到过，6 位数字在其它情况下出现可能性也非常大，比如手机号的一部分，身份证号的一部分，所以如果是数据提取，一般需要添加断言，即写成 <code>(?&lt;!\d)[1-9]\d{5}(?!\d)</code>。</p> <ol start="8"><li>QQ 号码</li></ol> <p>目前 QQ 号不能以 0 开头，最长的有 10 位，最短的从 10000（5 位）开始。从规则上我们可以得知，首位是 1-9，后面跟着是 4 到 9 位的数字，即可以使用 <code>[1-9][0-9]{4,9}</code> 来表示。</p> <ol start="9"><li>中文字符</li></ol> <p>中文属于多字节 Unicode 字符，之前我们讲过比如通过 Unicode 属性，但有一些语言是不支持这种属性的，可以通过另外一个办法，就是码值的范围，中文的范围是 4E00 - 9FFF 之间，这样可以覆盖日常使用大多数情况。</p> <p>不同的语言是表示方式有一些差异，比如在 Python，Java，JavaScript 中，Unicode 可以写成 \u 码值 来表示，即匹配中文的正则可以写成<code>[\u4E00-\u9FFF]</code>，如果在 PHP 中使用，Unicode 就需要写成 \u{码值} 的样式</p> <ol start="10"><li>IPv4 地址</li></ol> <p>IPv4 地址通常表示成 27.86.1.226 的样式，4 个数字用点隔开，每一位范围是 0-255，比如从日志中提取出 IP，如果不要求那么精确，一般使用 <code>\d{1,3}(\.\d{1,3}){3}</code></p> <p>如果我们想更精确地匹配，可以针对一到三位数分别考虑，一位数时可以表示成 <code>0{0,2}\d</code>，两位数时可以表示成 <code>0?[1-9]\d</code>，三位数时可以表示成 <code>1\d\d|2[0-4]\d|25[0-5]</code>，使用多选分支结构把他们写到一起，就是 <code>0{0,2}\d|0?[1-9]\d|1\d\d|2[0-4]\d|25[0-5]</code>这样。</p> <p>这是表示出了 IPv4 地址中的一位（正则假设是 X），我们可以把 IPv4 表示成 X.X.X.X，可以使用量词，写成 (?:X.){3}X 或 X(?:.X){3}，由于 X 本身比较复杂，里面有多选分支结构，所以需要把它加上括号，所以 IPv4 的正则应该可以写成<code>(?:1\d\d|2[0-4]\d|25[0-5]|0?[1-9]\d|0{0,2}\d)(?:\.(?:1\d\d|2[0-4]\d|25[0-5]|0?[1-9]\d|0{0,2}\d)){3}</code>。</p> <ol start="11"><li>日期和时间</li></ol> <p>假设日期格式是 yyyy-mm-dd，如果不那么严格，我们可以直接使用 <code>\d{4}-\d{2}-\d{2}</code>。如果再精确一些，比如月份是 1-12，当为一位的时候，前面可能不带 0，可以写成 01 或 1，月份使用正则，可以表示成 <code>1[0-2]|0?[1-9]</code>，日可能是 1-31，可以表示成<code>[12]\d|3[01]|0?[1-9]</code>，这里需要注意的是 <code>0?[1-9]</code> 应该放在多选分支的最后面，因为放最前面，匹配上一位数字的时候就停止了，正确的正应该是<code>\d{4}-(?:1[0-2]|0?[1-9])-(?:[12]\d|3[01]|0?[1-9])</code>。</p> <p>时间格式比如是 23:34，如果是 24 小时制，小时是 0-23，分钟是 0-59，所以可以写成<code>(?:2[0-3]|1\d|0?\d):(?:[1-5]\d|0?\d)</code>。</p> <ol start="12"><li>邮箱</li></ol> <p>邮箱的组成是比较复杂的，格式是 用户名 @主机名，用户名部分通常可以有英文字母，数字，下划线，点等组成，但其中点不能在开头，也不能重复出现。不过我们可以实现一些简体的版本，比如：<code>[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+</code></p> <ol start="13"><li>网页标签</li></ol> <p>配对出现的标签，比如 title，一般网页标签不区分大小写，我们可以使用 <code>(?i)&lt;title&gt;.\*?&lt;/title&gt;</code>来进行匹配。在提取引号里面的内容时，可以使用 <code>[^&quot;]+</code>，方括号里面的内容时，可以使用 <code>[^&gt;]+</code> 等方式。</p> <h3 id="其他说明"><a href="#其他说明" class="header-anchor">#</a> 其他说明</h3> <p>内容提取时还需要添加合适的断言</p> <p>内容匹配时还需要添加\A \z \Z 或^$等</p> <p>复杂正则很难一次写好，需要测试不断完善</p> <p>很多时候得在精确性和可维护性之间权衡</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/lalifeier/awesome-notes/edit/master/docs/tool/Regular_Expression/README.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">1/16/2021, 2:40:45 PM</span></div></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.6837fd68.js" defer></script><script src="/assets/js/2.ba37855e.js" defer></script><script src="/assets/js/46.1110c8f6.js" defer></script><script src="/assets/js/5.65b8a4d7.js" defer></script>
  </body>
</html>
